# Local Postex
### Goal - get privesc

`whoami`

`sudo -l` - you can pretty much stop here if you're lucky.  Make sure your shell is interactive first or this might mess it up.

`ifconfig`

`ip -a' - or, even better: `ip -br a`

`ss -antup`

`netstat -antup`

`lsof -i`

`cat /etc/resolv.conf`

`iptables -L`

`arp -e`

`route`

`tcpdump ...` (if able)

`cat /etc/*release`

`uname -a`

`arch`   `getconf LONG_BIT`

`cat /proc/version`

`cat /etc/issue`

`cat /etc/profile`

`cat /etc/bashrc`

`cat /home/<user>/.bash_history`

`env`

User enum: `who` `w` `id` `last`
- Check /.ssh and /etc/ssh

`ls -lha /var/mail`

`cat ~/.bashrc`

`cat ~/.bash_profile`

`cat /etc/passwd`

`cat /etc/group`

`cat /etc/shadow` (if able)

`grep -Rni password 2>/dev/null` and other juicy keywords (careful, might take a long time to run)

`ps aux` `ps aux | grep root` - what's running with privs?

`cat /etc/services`

`ls -lha /usr/bin`

`ls -lha /sbin/`

`dpkg -l` `rpm -qa` `ls -lha /var/cache/apt/archives0` `ls -lha /var/cache/yum` as applicable

`crontab -l`

`cat /etc/cron*` - anything writable running as root?

Configs: `cat /etc/syslog.conf` `cat /etc/apache/apache2.conf` `cat /etc/inetd.conf`

`cat /etc/exports` - hoping to see no_root_squash

`find /etc/ -writable -type f 2>/dev/null`
`find /etc/ -writable -type d 2>/dev/null`

Website - hidden files/hardcoded creds?
`ls -lhaR /var/www` `ls -lhaR /srv/www/htdocs` `ls -lhaR /var/www/html`
- Check /var/log and /etc/httpd/logs

`df -h`

`mount`

`cat /etc/fstab`

Sticky bits/permissions:
`find / -perm -u=s -type f 2>/dev/null`

`find / -perm -1000 -type d 2>/dev/null`

`find / -perm -g=s -type f 2>/dev/null`

`find / -perm -g=s -o perm -u=s -type f 2>/dev/null`

`find / -perm -o x -type d 2>/dev/null` (world-executable directories)

`find -P / -type f -executable -user root -perm -o=w,u=s -name '*' 2>/dev/null -exec ls -la {} \;` (executable writable by others and owned by root, suid set)

Which tools are already here?
`which`
- Python
- Perl
- gcc
- cc
- wget
- nc
- netcat
- tftp
- ftp

# Root Postex
### Goal - get creds/loot and see if you can pivot anywhere
- Check /root directory (`ls -lahR`)
- Check user directories
- Screenshot of `whoami`, `ip a` and `cat proof.txt` if applicable
- Recheck ~/.ssh and /etc/ssh

*Don't forget to prepend all these with `sudo` if you are not actually root*

`netstat -antup`

`iptables -L`

`ss - antup`

`cat /etc/shadow`

`cat /etc/passwd`

*save both of those files for unshadow/John later*

`cat /home/<user>/.bash_history` each user

`grep -Rni password 2>/dev/null` and other juicy keywords


